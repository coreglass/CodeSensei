# æ•™å­¦å‹ç¼–ç¨‹åŠ©æ‰‹è¯¦ç»†è®¾è®¡ (Code Sensei)

> **ç‰ˆæœ¬**: v1.0.0 (OpenCode ç‰ˆæœ¬)
> **æ›´æ–°æ—¥æœŸ**: 2026-02-08
> **æ¶æ„è°ƒæ•´**: ä» Claude Code SDK è¿ç§»åˆ° OpenCode Server

---

## æœ€è¿‘é‡å¤§å˜æ›´ (v0.4.0 â†’ v1.0.0)

### æ¶æ„å˜æ›´

**ä¹‹å‰ (v0.4.0)**:
```
å‰ç«¯ â†’ Tauri (Rust) â†’ Node.js æ’ä»¶ â†’ Claude Code SDK â†’ Claude API
```

**ç°åœ¨ (v1.0.0)**:
```
å‰ç«¯ â†’ Tauri (Rust) â†’ HTTP â†’ OpenCode Server â†’ AI Provider
```

**å˜æ›´åŸå› **:
- âœ… **å¼€æºæ— é”å®š**: OpenCode æ˜¯å®Œå…¨å¼€æºçš„ï¼Œé¿å…äº†ä¾èµ–å•ä¸€ä¾›åº”å•†
- âœ… **çµæ´»æ€§**: æ”¯æŒå¤šç§ AI Providerï¼ˆOpenAIã€Anthropicã€æœ¬åœ°æ¨¡å‹ç­‰ï¼‰
- âœ… **ç®€åŒ–æ¶æ„**: ç§»é™¤ Node.js ä¸­é—´å±‚ï¼Œç›´æ¥ä½¿ç”¨ HTTP API
- âœ… **æˆæœ¬å¯æ§**: å¯ä½¿ç”¨æœ¬åœ°æ¨¡å‹ï¼Œé™ä½ API è°ƒç”¨æˆæœ¬
- âœ… **ç¤¾åŒºæ”¯æŒ**: æ´»è·ƒçš„å¼€æºç¤¾åŒºï¼ŒæŒç»­æ›´æ–°

---

## ä¸€ã€æ•´ä½“æ¶æ„

### 1.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Tauri å‰ç«¯ (Vue 3 + Element Plus)           â”‚
â”‚  - é¡¹ç›®åˆ—è¡¨è§†å›¾                                          â”‚
â”‚  - é¡¹ç›®è¯¦æƒ…è§†å›¾ï¼ˆä¸‰æ ï¼šæ–‡ä»¶æ ‘ | ç¼–è¾‘å™¨ | AIåŠ©æ‰‹ï¼‰          â”‚
â”‚  - OpenCode é…ç½®å¯¹è¯æ¡†                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Tauri IPC Commands
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Rust åç«¯ (Tauri)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¡¹ç›®ç®¡ç†æ¨¡å—    â”‚  OpenCode HTTP å®¢æˆ·ç«¯  â”‚  é…ç½®ç®¡ç†    â”‚
â”‚  - åˆ›å»º/åˆ é™¤é¡¹ç›®  â”‚  - ä¼šè¯ç®¡ç†              â”‚  - Server URL  â”‚
â”‚  - æ–‡ä»¶æ ‘ç®¡ç†      â”‚  - æ¶ˆæ¯å‘é€              â”‚  - è®¤è¯ä¿¡æ¯    â”‚
â”‚  - æ–‡ä»¶è¯»å†™      â”‚  - HTTP è¯·æ±‚             â”‚  - Provideré…ç½®â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼            â–¼            â–¼
   é¡¹ç›®å…ƒæ•°æ®     OpenCode      HTTP API
   (JSONæ–‡ä»¶)     Server        (REST API)
                       â”‚
                       â–¼
                 AI Provider
                 (OpenAI/Anthropic/
                  æœ¬åœ°æ¨¡å‹/...)
```

### 1.2 æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬/è¯´æ˜ |
|------|------|----------|
| **å‰ç«¯æ¡†æ¶** | Vue 3 + Composition API | Element Plus UI |
| **ä»£ç ç¼–è¾‘å™¨** | Monaco Editor | VS Code åŒæ¬¾ï¼Œå¤šè¯­è¨€æ”¯æŒ |
| **æ¡Œé¢æ¡†æ¶** | Tauri 2.x | Rust åç«¯ |
| **åç«¯è¯­è¨€** | Rust | æ€§èƒ½å¥½ï¼Œå®‰å…¨æ€§é«˜ |
| **HTTP å®¢æˆ·ç«¯** | reqwest | å¼‚æ­¥ HTTP è¯·æ±‚ |
| **AI é›†æˆ** | OpenCode Server | HTTP API (OpenAPI 3.1) |
| **é…ç½®å­˜å‚¨** | JSON æ–‡ä»¶ | ç”¨æˆ·é…ç½®æŒä¹…åŒ– |
| **Base64 ç¼–ç ** | base64 crate | Basic Auth è®¤è¯ |

### 1.3 ç›®å½•ç»“æ„

```
Code Sensei/
â”œâ”€â”€ src/                              # Vue å‰ç«¯æºç 
â”‚   â”œâ”€â”€ views/                        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home.vue                  # é¡¹ç›®åˆ—è¡¨é¡µ
â”‚   â”‚   â”œâ”€â”€ Project.vue               # é¡¹ç›®è¯¦æƒ…é¡µï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ Graph.vue                 # å›¾è¡¨è§†å›¾
â”‚   â”‚   â””â”€â”€ TaskExecution.vue
â”‚   â”œâ”€â”€ components/                   # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MonacoEditor.vue          # ä»£ç ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ RequirementDialog.vue     # éœ€æ±‚æ–‡æ¡£å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ SettingsDialog.vue        # â­ OpenCode é…ç½®å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ tauri.js                  # Tauri API å°è£…
â”‚   â””â”€â”€ main.js                       # Vue å…¥å£
â”œâ”€â”€ src-tauri/                        # Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs                   # Tauri ä¸»ç¨‹åº (1100+ è¡Œ)
â”‚   â”‚   â”œâ”€â”€ opencode.rs               # â­ OpenCode HTTP å®¢æˆ·ç«¯ (390 è¡Œ)
â”‚   â”‚   â””â”€â”€ config.rs                 # â­ é…ç½®ç®¡ç†æ¨¡å— (180 è¡Œ)
â”‚   â”œâ”€â”€ Cargo.toml                    # Rust ä¾èµ–é…ç½®
â”‚   â””â”€â”€ target/
â”‚       â”œâ”€â”€ release/                  # Release æ„å»º
â”‚       â”‚   â””â”€â”€ code-sensei.exe       # å¯æ‰§è¡Œæ–‡ä»¶
â”‚       â””â”€â”€ bundle/                   # å®‰è£…åŒ…
â”‚           â””â”€â”€ nsis/
â”‚               â””â”€â”€ Code Sensei_0.1.0_x64-setup.exe
â”œâ”€â”€ OPENCODE_INTEGRATION.md           # â­ OpenCode é›†æˆæ–‡æ¡£
â”œâ”€â”€ OPENCODE_TEST_GUIDE.md            # â­ æµ‹è¯•æŒ‡å—
â”œâ”€â”€ README_EN.md                      # è‹±æ–‡è¯´æ˜
â””â”€â”€ package.json                      # å‰ç«¯ä¾èµ–é…ç½®
```

---

## äºŒã€OpenCode é›†æˆæ¶æ„

### 2.1 æ ¸å¿ƒ API é›†æˆ

OpenCode Server æä¾›åŸºäº OpenAPI 3.1 çš„ REST APIï¼Œä¸»è¦ä½¿ç”¨ä»¥ä¸‹ç«¯ç‚¹ï¼š

#### 2.1.1 å¥åº·æ£€æŸ¥
```http
GET /global/health

Response:
{
  "healthy": true,
  "version": "x.x.x"
}
```

#### 2.1.2 ä¼šè¯ç®¡ç†
```http
# åˆ›å»ºä¼šè¯
POST /session
Body: {
  "title": "ä¼šè¯æ ‡é¢˜",
  "providerId": "openai",      // å¯é€‰
  "modelId": "gpt-4"           // å¯é€‰
}

Response:
{
  "id": "session-uuid",
  "title": "...",
  "created_at": "..."
}

# åˆ é™¤ä¼šè¯
DELETE /session/{id}
```

#### 2.1.3 æ¶ˆæ¯å‘é€
```http
POST /session/{id}/message
Body: {
  "parts": [
    {
      "type": "text",
      "text": "ç”¨æˆ·è¾“å…¥çš„å†…å®¹"
    }
  ],
  "agent": "string",           // å¯é€‰ï¼ŒæŒ‡å®š agent
  "model": "string"            // å¯é€‰ï¼ŒæŒ‡å®šæ¨¡å‹
}

Response:
{
  "info": {
    "id": "msg-id",
    "role": "assistant",
    "created": "..."
  },
  "parts": [
    {
      "type": "text",
      "text": "AI çš„å“åº”å†…å®¹"
    }
  ]
}
```

### 2.2 æ•°æ®æµå›¾

**éœ€æ±‚æ–‡æ¡£æ›´æ–°æµç¨‹ï¼š**
```
ç”¨æˆ·è¾“å…¥éœ€æ±‚
    â†“
å‰ç«¯è°ƒç”¨ update_requirement_with_agent()
    â†“
Rust æ¥æ”¶è¯·æ±‚ â†’ è¯»å–é¡¹ç›®é…ç½®
    â†“
è·å– OpenCode é…ç½®ï¼ˆServer URLã€è®¤è¯ä¿¡æ¯ï¼‰
    â†“
åˆ›å»º OpenCode HTTP å®¢æˆ·ç«¯
    â†“
æ£€æŸ¥ Server å¥åº·çŠ¶æ€
    â†“
åˆ›å»ºä¼šè¯ï¼ˆæŒ‡å®š Provider å’Œ Modelï¼‰
    â†“
æ„å»ºæç¤ºè¯ï¼ˆåŒ…å«ç”¨æˆ·éœ€æ±‚å’Œç°æœ‰æ–‡æ¡£ï¼‰
    â†“
å‘é€æ¶ˆæ¯åˆ° OpenCode Server
    â†“
OpenCode å¤„ç†
  â”œâ”€ è°ƒç”¨ AI Provider API
  â”œâ”€ ç”Ÿæˆéœ€æ±‚æ–‡æ¡£å†…å®¹
  â””â”€ è¿”å›å“åº”
    â†“
æå–å“åº”æ–‡æœ¬
    â†“
ä¿å­˜åˆ° requirement.md
    â†“
å‘é€äº‹ä»¶é€šçŸ¥å‰ç«¯åˆ·æ–°
    â†“
æ˜¾ç¤ºæ›´æ–°ç»“æœ
```

**æ–‡ä»¶åˆ›å»º/ä¿®æ”¹æµç¨‹ï¼š**
```
ç”¨æˆ·æŒ‡ä»¤
    â†“
å‰ç«¯è°ƒç”¨ create_files_with_agent()
    â†“
Rust æ¥æ”¶è¯·æ±‚
    â†“
è¯»å–éœ€æ±‚æ–‡æ¡£ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    â†“
åˆ›å»º OpenCode ä¼šè¯
    â†“
æ„å»ºæç¤ºè¯ï¼ˆé¡¹ç›®è·¯å¾„ + éœ€æ±‚ + ç”¨æˆ·æŒ‡ä»¤ï¼‰
    â†“
å‘é€æ¶ˆæ¯åˆ° OpenCode Server
    â†“
OpenCode ä½¿ç”¨å·¥å…·å¤„ç†
  â”œâ”€ Read å·¥å…·ï¼šè¯»å–ç°æœ‰æ–‡ä»¶
  â”œâ”€ Grep å·¥å…·ï¼šæœç´¢ä»£ç 
  â”œâ”€ Write/Edit å·¥å…·ï¼šä¿®æ”¹æˆ–åˆ›å»ºæ–‡ä»¶
  â””â”€ è¿”å›æ‰§è¡Œç»“æœ
    â†“
æå–å“åº”æ–‡æœ¬ï¼ˆæ“ä½œæ‘˜è¦ï¼‰
    â†“
å‘é€äº‹ä»¶é€šçŸ¥å‰ç«¯åˆ·æ–°æ–‡ä»¶æ ‘
    â†“
æ˜¾ç¤ºæ“ä½œç»“æœ
```

---

## ä¸‰ã€æ ¸å¿ƒæ¨¡å—å®ç°

### 3.1 OpenCode HTTP å®¢æˆ·ç«¯ (opencode.rs)

**èŒè´£ï¼š**
- å°è£… OpenCode Server çš„ HTTP API è°ƒç”¨
- å¤„ç† Basic Auth è®¤è¯
- ç®¡ç†ä¼šè¯ç”Ÿå‘½å‘¨æœŸ
- æä¾›ç®€æ´çš„ Rust API

**æ•°æ®ç»“æ„ï¼š**

```rust
// ä¼šè¯ä¿¡æ¯
pub struct Session {
    pub id: String,
    pub title: String,
    pub created_at: String,
    pub provider_id: Option<String>,
    pub model_id: Option<String>,
}

// æ¶ˆæ¯å†…å®¹
pub struct MessagePart {
    pub part_type: String,  // "text", "reasoning" ç­‰
    pub text: Option<String>,
    pub reasoning: Option<String>,
}

// å®Œæ•´æ¶ˆæ¯
pub struct Message {
    pub info: MessageInfo,
    pub parts: Vec<MessagePart>,
}

// å¥åº·æ£€æŸ¥å“åº”
pub struct HealthResponse {
    pub healthy: bool,
    pub version: String,
}
```

**å…³é”®æ–¹æ³•ï¼š**

```rust
pub struct OpenCodeClient {
    client: Client,
    base_url: String,
    auth_header: Option<String>,  // Basic Auth
}

impl OpenCodeClient {
    // åˆ›å»ºå®¢æˆ·ç«¯ï¼ˆè‡ªåŠ¨å¤„ç†è®¤è¯ï¼‰
    pub fn new(server_url: String, username: String, password: Option<String>) -> Self;

    // å¥åº·æ£€æŸ¥
    pub async fn health_check(&self) -> Result<HealthResponse, String>;

    // åˆ›å»ºä¼šè¯
    pub async fn create_session(
        &self,
        title: &str,
        provider_id: Option<String>,
        model_id: Option<String>,
    ) -> Result<Session, String>;

    // å‘é€æ¶ˆæ¯ï¼ˆåŒæ­¥ï¼‰
    pub async fn send_message(
        &self,
        session_id: &str,
        message: &str,
        agent: Option<String>,
        model: Option<String>,
    ) -> Result<Message, String>;

    // åˆ é™¤ä¼šè¯
    pub async fn delete_session(&self, session_id: &str) -> Result<bool, String>;
}
```

**è®¤è¯å®ç°ï¼š**

```rust
let auth_header = if let Some(pwd) = password {
    let credentials = format!("{}:{}", username, pwd);
    use base64::Engine;
    let encoded = base64::engine::general_purpose::STANDARD.encode(credentials);
    Some(format!("Basic {}", encoded))
} else {
    None
};
```

### 3.2 é…ç½®ç®¡ç†æ¨¡å— (config.rs)

**èŒè´£ï¼š**
- ç®¡ç† OpenCode é…ç½®
- é…ç½®æŒä¹…åŒ–åˆ°æ–‡ä»¶
- æä¾›å…¨å±€é…ç½®è®¿é—®

**æ•°æ®ç»“æ„ï¼š**

```rust
pub struct OpenCodeConfig {
    pub server_url: String,           // http://localhost:4096
    pub username: String,             // "opencode"
    pub password: Option<String>,     // å¯é€‰å¯†ç 
    pub default_provider: Option<String>,  // "openai", "anthropic" ç­‰
    pub default_model: Option<String>,     // "gpt-4", "claude-3-5-sonnet" ç­‰
}
```

**é…ç½®æ–‡ä»¶ä½ç½®ï¼š**
- Windows: `%USERPROFILE%\.config\CodeSensei\opencode-config.json`
- macOS/Linux: `~/.config/CodeSensei/opencode-config.json`

**å…¨å±€å•ä¾‹æ¨¡å¼ï¼š**

```rust
pub static CONFIG_MANAGER: Mutex<Option<ConfigManager>> = Mutex::new(None);

// åˆå§‹åŒ–
pub fn init_config_manager() -> Result<(), String>;

// è·å–é…ç½®
pub fn get_config() -> OpenCodeConfig;

// ä¿å­˜é…ç½®
pub fn save_config(config: &OpenCodeConfig) -> Result<(), String>;
```

### 3.3 Tauri å‘½ä»¤å®ç° (main.rs)

**æ ¸å¿ƒ AI å‘½ä»¤ï¼š**

```rust
// æ›´æ–°éœ€æ±‚æ–‡æ¡£
#[tauri::command]
async fn update_requirement_with_agent(
    app: tauri::AppHandle,
    state: tauri::State<'_, AppState>,
    project_id: String,
    user_input: String,
) -> Result<AgentResponse, String> {
    // 1. è¯»å–é¡¹ç›®é…ç½®
    // 2. è·å– OpenCode é…ç½®
    // 3. åˆ›å»ºå®¢æˆ·ç«¯å¹¶æ£€æŸ¥è¿æ¥
    // 4. æ„å»ºæç¤ºè¯
    // 5. åˆ›å»ºä¼šè¯
    // 6. å‘é€æ¶ˆæ¯
    // 7. ä¿å­˜æ–‡æ¡£
    // 8. åˆ é™¤ä¼šè¯
    // 9. å‘é€å‰ç«¯äº‹ä»¶
}

// åˆ›å»ºæ–‡ä»¶
#[tauri::command]
async fn create_files_with_agent(
    app: tauri::AppHandle,
    state: tauri::State<'_, AppState>,
    project_id: String,
    user_input: String,
) -> Result<AgentResponse, String> {
    // ç±»ä¼¼æµç¨‹ï¼Œä½†æç¤ºè¯ä¸åŒ
}
```

**é…ç½®ç®¡ç†å‘½ä»¤ï¼š**

```rust
#[tauri::command]
fn get_opencode_config() -> OpenCodeConfig;

#[tauri::command]
fn save_opencode_config(config: OpenCodeConfig) -> Result<(), String>;

#[tauri::command]
async fn test_opencode_connection(
    app: AppHandle,
    server_url: String,
    username: String,
    password: Option<String>,
) -> Result<String, String>;

#[tauri::command]
fn update_server_url(server_url: String) -> Result<(), String>;

#[tauri::command]
fn update_auth(username: String, password: Option<String>) -> Result<(), String>;

#[tauri::command]
fn update_provider_config(
    provider: Option<String>,
    model: Option<String>,
) -> Result<(), String>;
```

### 3.4 å‰ç«¯è®¾ç½®ç•Œé¢ (SettingsDialog.vue)

**é…ç½®é¡¹ï¼š**

1. **Server é…ç½®**
   - Server åœ°å€ï¼š`http://localhost:4096`
   - ç”¨æˆ·åï¼š`opencode`ï¼ˆé»˜è®¤ï¼‰
   - å¯†ç ï¼šå¯é€‰ï¼ˆå¦‚æœ Server è®¾ç½®äº†å¯†ç ï¼‰

2. **AI Provider é…ç½®**
   - Provider é€‰æ‹©ï¼šOpenAIã€Anthropicã€OpenAI Compatibleã€Azureã€Google
   - æ¨¡å‹è¾“å…¥ï¼š`gpt-4`ã€`claude-3-5-sonnet-20241022` ç­‰
   - å¿«é€Ÿé€‰æ‹©æŒ‰é’®ï¼šä¸€é”®é…ç½®å¸¸ç”¨æ¨¡å‹

3. **æµ‹è¯•åŠŸèƒ½**
   - æµ‹è¯•è¿æ¥æŒ‰é’®
   - æ˜¾ç¤º Server ç‰ˆæœ¬
   - å®æ—¶åé¦ˆè¿æ¥çŠ¶æ€

**å­—æ®µåæ˜ å°„ï¼š**

å‰ç«¯ä½¿ç”¨ camelCaseï¼Œåç«¯ä½¿ç”¨ snake_caseï¼š
```javascript
// å‰ç«¯å‘é€
{
  server_url: "http://localhost:4096",
  username: "opencode",
  password: null,
  default_provider: "openai",
  default_model: "gpt-4"
}
```

---

## å››ã€æç¤ºè¯è®¾è®¡

### 4.1 éœ€æ±‚æ–‡æ¡£æç¤ºè¯

```javascript
function buildRequirementPrompt(userInput, currentContent) {
  if (currentContent.isEmpty()) {
    return `ä½ æ˜¯ Code Sensei çš„éœ€æ±‚æ–‡æ¡£ç¼–è¾‘åŠ©æ‰‹ã€‚

## ç”¨æˆ·éœ€æ±‚
${userInput}

## ä»»åŠ¡
è¯·æ ¹æ®ç”¨æˆ·éœ€æ±‚åˆ›å»ºéœ€æ±‚æ–‡æ¡£ã€‚

## è¾“å‡ºæ ¼å¼
ä¸¥æ ¼æŒ‰ç…§ Markdown æ ¼å¼è¾“å‡ºå®Œæ•´çš„éœ€æ±‚æ–‡æ¡£ï¼ŒåŒ…å«ï¼š
- é¡¹ç›®æè¿°
- åŠŸèƒ½éœ€æ±‚
- æŠ€æœ¯æ ˆ
- å…¶ä»–å¿…è¦ç« èŠ‚

è¯·ç›´æ¥è¾“å‡ºéœ€æ±‚æ–‡æ¡£å†…å®¹ï¼Œä¸è¦æœ‰å…¶ä»–è¯´æ˜ã€‚`;
  } else {
    return `ä½ æ˜¯ Code Sensei çš„éœ€æ±‚æ–‡æ¡£ç¼–è¾‘åŠ©æ‰‹ã€‚

## ç”¨æˆ·éœ€æ±‚
${userInput}

## å½“å‰éœ€æ±‚æ–‡æ¡£å†…å®¹
\`\`\`markdown
${currentContent}
\`\`\`

## ä»»åŠ¡
è¯·æ ¹æ®ç”¨æˆ·éœ€æ±‚æ›´æ–°éœ€æ±‚æ–‡æ¡£ã€‚ä¿æŒæ–‡æ¡£ç»“æ„æ¸…æ™°ï¼Œä½¿ç”¨ Markdown æ ¼å¼ã€‚

è¯·ç›´æ¥è¾“å‡ºæ›´æ–°åçš„å®Œæ•´éœ€æ±‚æ–‡æ¡£å†…å®¹ï¼Œä¸è¦æœ‰å…¶ä»–è¯´æ˜ã€‚`;
  }
}
```

### 4.2 æ–‡ä»¶åˆ›å»ºæç¤ºè¯

```javascript
function buildCreateFilesPrompt(userInput, projectPath, requirementContent) {
  let prompt = `ä½ æ˜¯ Code Sensei çš„ä»£ç ç”ŸæˆåŠ©æ‰‹ã€‚

## é¡¹ç›®è·¯å¾„
${projectPath}

## ç”¨æˆ·éœ€æ±‚
${userInput}
`;

  if (!requirementContent.isEmpty()) {
    prompt += `
## éœ€æ±‚æ–‡æ¡£å†…å®¹
\`\`\`markdown
${requirementContent}
\`\`\`
`;
  }

  prompt += `
## ä»»åŠ¡
æ ¹æ®ç”¨æˆ·éœ€æ±‚åœ¨é¡¹ç›®ä¸­åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶ã€‚

## å·¥ä½œåŸåˆ™
- å…ˆç”¨ Read å·¥å…·è¯»å–ç°æœ‰æ–‡ä»¶ï¼Œäº†è§£é¡¹ç›®ç»“æ„
- ä¼˜å…ˆä¿®æ”¹ç°æœ‰æ–‡ä»¶ï¼Œé¿å…åˆ›å»ºä¸å¿…è¦çš„æ–‡ä»¶
- ä¿æŒä»£ç é£æ ¼ä¸€è‡´
- ç¡®ä¿ä»£ç å¯ä»¥è¿è¡Œ

## å·¥å…·ä½¿ç”¨
ä½ æœ‰ä»¥ä¸‹å·¥å…·å¯ç”¨ï¼š
- Read: è¯»å–æ–‡ä»¶å†…å®¹
- Write: å†™å…¥æ–‡ä»¶å†…å®¹
- Edit: ç¼–è¾‘æ–‡ä»¶çš„ç‰¹å®šéƒ¨åˆ†
- Grep: æœç´¢æ–‡ä»¶å†…å®¹
- Glob: æŸ¥æ‰¾æ–‡ä»¶
- Bash: æ‰§è¡Œå‘½ä»¤

è¯·å…ˆç”¨ Read å’Œ Grep å·¥å…·åˆ†æç°æœ‰ä»£ç ï¼Œå†å†³å®šå¦‚ä½•ä¿®æ”¹æˆ–åˆ›å»ºæ–‡ä»¶ã€‚

## è¾“å‡ºæ ¼å¼
æ‰§è¡Œå®Œæˆåï¼Œç”¨ä¸­æ–‡ç®€çŸ­è¯´æ˜ä½ ä¿®æ”¹äº†å“ªäº›æ–‡ä»¶ã€‚`;

  return prompt;
}
```

---

## äº”ã€é…ç½®ç®¡ç†

### 5.1 é…ç½®æ–‡ä»¶ç»“æ„

**opencode-config.json:**
```json
{
  "server_url": "http://localhost:4096",
  "username": "opencode",
  "password": null,
  "default_provider": "openai",
  "default_model": "gpt-4"
}
```

### 5.2 é…ç½®åŠ è½½æµç¨‹

```
åº”ç”¨å¯åŠ¨
    â†“
init_config_manager()
    â†“
è¯»å–é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºé»˜è®¤é…ç½®ï¼‰
    â†“
ä¿å­˜åˆ°å…¨å±€å•ä¾‹
    â†“
å‰ç«¯é€šè¿‡ get_opencode_config() è·å–é…ç½®
    â†“
æ˜¾ç¤ºåœ¨è®¾ç½®å¯¹è¯æ¡†ä¸­
```

### 5.3 é…ç½®ä¿å­˜æµç¨‹

```
ç”¨æˆ·ä¿®æ”¹é…ç½®
    â†“
ç‚¹å‡»"ä¿å­˜é…ç½®"
    â†“
å‰ç«¯éªŒè¯ï¼ˆURL æ ¼å¼ç­‰ï¼‰
    â†“
è°ƒç”¨ save_opencode_config()
    â†“
Rust éªŒè¯å¹¶ä¿å­˜åˆ°æ–‡ä»¶
    â†“
æ›´æ–°å…¨å±€é…ç½®
    â†“
è¿”å›æˆåŠŸ
```

---

## å…­ã€å½“å‰çŠ¶æ€ (v1.0.0)

### 6.1 âœ… å·²å®ŒæˆåŠŸèƒ½

#### åç«¯å®ç°
- âœ… OpenCode HTTP å®¢æˆ·ç«¯å®Œæ•´å®ç°
- âœ… é…ç½®ç®¡ç†æ¨¡å—ï¼ˆæ–‡ä»¶æŒä¹…åŒ–ï¼‰
- âœ… å¥åº·æ£€æŸ¥ã€ä¼šè¯ç®¡ç†ã€æ¶ˆæ¯å‘é€
- âœ… Basic Auth è®¤è¯æ”¯æŒ
- âœ… éœ€æ±‚æ–‡æ¡£ç”ŸæˆåŠŸèƒ½
- âœ… æ–‡ä»¶åˆ›å»º/ä¿®æ”¹åŠŸèƒ½
- âœ… é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º

#### å‰ç«¯å®ç°
- âœ… OpenCode é…ç½®å¯¹è¯æ¡†
- âœ… Server è¿æ¥æµ‹è¯•
- âœ… Provider å’Œ Model é€‰æ‹©
- âœ… å¿«é€Ÿé…ç½®æŒ‰é’®
- âœ… é…ç½®éªŒè¯å’Œä¿å­˜

#### é¡¹ç›®ç®¡ç†
- âœ… é¡¹ç›®åˆ›å»ºã€åˆ é™¤
- âœ… è‡ªå®šä¹‰æ ¹ç›®å½•
- âœ… æ–‡ä»¶æ ‘æ‰«æå’Œæ˜¾ç¤º
- âœ… æ–‡ä»¶æ“ä½œï¼ˆåˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€ç§»åŠ¨ï¼‰
- âœ… ä»£ç ç¼–è¾‘å’Œä¿å­˜

#### æ„å»ºç³»ç»Ÿ
- âœ… å‰ç«¯ç¼–è¯‘æ— é”™è¯¯
- âœ… åç«¯ç¼–è¯‘æ— é”™è¯¯
- âœ… å®‰è£…åŒ…ç”ŸæˆæˆåŠŸ
- âœ… ä¾èµ–æ¸…ç†å®Œæˆ

### 6.2 âš ï¸ å·²çŸ¥é™åˆ¶

**1. éæµå¼è¾“å‡º**
- å½“å‰åªæ˜¾ç¤ºæœ€ç»ˆç»“æœ
- æœªå®ç° Server-Sent Events (SSE)
- ç”¨æˆ·ä½“éªŒæœ‰æ”¹è¿›ç©ºé—´

**2. å·¥å…·è°ƒç”¨ä¸å¯è§**
- æ— æ³•çœ‹åˆ° OpenCode ä½¿ç”¨äº†å“ªäº›å·¥å…·
- è°ƒè¯•å›°éš¾
- è®¡åˆ’æ·»åŠ å¯è§†åŒ–

**3. æ— ä¼šè¯å†å²**
- æ¯æ¬¡åˆ›å»ºæ–°ä¼šè¯
- æ— æ³•æŸ¥çœ‹å†å²å¯¹è¯
- åŠŸèƒ½å—é™

**4. ç®€å•é”™è¯¯æç¤º**
- é”™è¯¯ä¿¡æ¯ä¸å¤Ÿè¯¦ç»†
- éš¾ä»¥å®šä½é—®é¢˜
- éœ€è¦æ”¹è¿›

### 6.3 ğŸ› å·²ä¿®å¤é—®é¢˜

**é—®é¢˜ 1ï¼šå­—æ®µåä¸åŒ¹é…**
- **é”™è¯¯**: `missing field 'server_url'`
- **åŸå› **: å‰ç«¯ä½¿ç”¨ camelCaseï¼Œåç«¯ä½¿ç”¨ snake_case
- **è§£å†³**: å‰ç«¯å‘é€æ—¶è½¬æ¢ä¸º snake_case
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

**é—®é¢˜ 2ï¼šbase64 API è¿‡æ—¶**
- **é”™è¯¯**: `use of deprecated function`
- **åŸå› **: ä½¿ç”¨äº†æ—§çš„ base64::encode
- **è§£å†³**: æ”¹ç”¨ base64::engine::general_purpose::STANDARD
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

**é—®é¢˜ 3ï¼šæ‰€æœ‰æƒé—®é¢˜**
- **é”™è¯¯**: `borrow of moved value`
- **åŸå› **: status() åœ¨ text() åè°ƒç”¨
- **è§£å†³**: æå‰ä¿å­˜ status å€¼
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 6.4 ğŸ“Š ä»£ç ç»Ÿè®¡

| æ¨¡å— | æ–‡ä»¶ | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| HTTP å®¢æˆ·ç«¯ | opencode.rs | 390 | âœ… |
| é…ç½®ç®¡ç† | config.rs | 180 | âœ… |
| ä¸»ç¨‹åº | main.rs | 1100+ | âœ… |
| è®¾ç½®ç•Œé¢ | SettingsDialog.vue | 330 | âœ… |
| API å°è£… | tauri.js | 210 | âœ… |
| **æ€»è®¡** | | **2200+** | **âœ…** |

---

## ä¸ƒã€å¼€å‘ç¯å¢ƒè®¾ç½®

### 7.1 å‰ç½®è¦æ±‚

**å¿…éœ€è½¯ä»¶ï¼š**

1. **Node.js** (v18+)
   ```bash
   node --version  # v18.x.x æˆ–æ›´é«˜
   ```

2. **Rust å·¥å…·é“¾**
   ```bash
   rustc --version  # 1.70+ æˆ–æ›´é«˜
   cargo --version
   ```

3. **OpenCode Server** (å¿…éœ€)
   ```bash
   npm install -g @opencode/opencode
   opencode --version
   ```

4. **AI Provider API Key**
   - OpenAI API Key
   - æˆ– Anthropic API Key
   - æˆ–å…¶ä»–æ”¯æŒçš„ Provider

### 7.2 å¼€å‘å‘½ä»¤

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd CodeSensei

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run tauri dev

# æ„å»ºå‰ç«¯
npm run build

# æ„å»ºå®Œæ•´åº”ç”¨
npm run tauri build

# è¾“å‡ºä½ç½®
# Windows: src-tauri/target/release/code-sensei.exe
# å®‰è£…åŒ…: src-tauri/target/release/bundle/nsis/Code Sensei_0.1.0_x64-setup.exe
```

### 7.3 OpenCode Server è®¾ç½®

**å®‰è£…ï¼š**
```bash
npm install -g @opencode/opencode
```

**å¯åŠ¨ Serverï¼š**
```bash
opencode serve --port 4096
```

**é…ç½® AI Providerï¼š**

æ–¹å¼ä¸€ï¼šä½¿ç”¨ TUI
```bash
opencode
# æŒ‰ Ctrl+M æ‰“å¼€æ¨¡å‹é€‰æ‹©å™¨
# é€‰æ‹© Provider
# è¾“å…¥ API Key
```

æ–¹å¼äºŒï¼šä½¿ç”¨ API
```bash
curl -X PUT http://localhost:4096/auth/openai \
  -H "Content-Type: application/json" \
  -d '{"apiKey": "sk-..."}'
```

---

## å…«ã€æµ‹è¯•æŒ‡å—

### 8.1 å•å…ƒæµ‹è¯•

**HTTP å®¢æˆ·ç«¯æµ‹è¯•ï¼š**
```rust
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_client_creation() {
        let client = OpenCodeClient::new(
            "http://localhost:4096".to_string(),
            "opencode".to_string(),
            None,
        );
        assert_eq!(client.base_url, "http://localhost:4096");
    }

    #[test]
    fn test_auth_header() {
        let client = OpenCodeClient::new(
            "http://localhost:4096".to_string(),
            "opencode".to_string(),
            Some("test123".to_string()),
        );
        assert!(client.auth_header.is_some());
        assert!(client.auth_header.unwrap().starts_with("Basic "));
    }
}
```

**é…ç½®æµ‹è¯•ï¼š**
```rust
#[test]
fn test_default_config() {
    let config = OpenCodeConfig::default();
    assert_eq!(config.server_url, "http://localhost:4096");
    assert_eq!(config.username, "opencode");
    assert!(config.password.is_none());
}
```

### 8.2 é›†æˆæµ‹è¯•æ­¥éª¤

**æµ‹è¯• 1ï¼šè¿æ¥æµ‹è¯•**
1. å¯åŠ¨ OpenCode Server
2. æ‰“å¼€ Code Sensei è®¾ç½®
3. è¾“å…¥ Server åœ°å€
4. ç‚¹å‡»"æµ‹è¯•è¿æ¥"
5. éªŒè¯ï¼šæ˜¾ç¤ºè¿æ¥æˆåŠŸå’Œç‰ˆæœ¬å·

**æµ‹è¯• 2ï¼šéœ€æ±‚æ–‡æ¡£ç”Ÿæˆ**
1. åˆ›å»ºæ–°é¡¹ç›®
2. åˆ‡æ¢åˆ°"éœ€æ±‚æ–‡æ¡£"æ¨¡å¼
3. è¾“å…¥éœ€æ±‚æè¿°
4. ç‚¹å‡»å‘é€
5. éªŒè¯ï¼šæ–‡æ¡£ç”Ÿæˆå¹¶ä¿å­˜

**æµ‹è¯• 3ï¼šæ–‡ä»¶åˆ›å»º**
1. åˆ‡æ¢åˆ°"åˆ›å»ºæ–‡ä»¶"æ¨¡å¼
2. è¾“å…¥æ–‡ä»¶åˆ›å»ºæŒ‡ä»¤
3. ç‚¹å‡»å‘é€
4. éªŒè¯ï¼šæ–‡ä»¶åˆ›å»ºæˆåŠŸï¼Œæ–‡ä»¶æ ‘åˆ·æ–°

**æµ‹è¯• 4ï¼šé…ç½®æŒä¹…åŒ–**
1. ä¿®æ”¹é…ç½®
2. ä¿å­˜é…ç½®
3. é‡å¯åº”ç”¨
4. éªŒè¯ï¼šé…ç½®ä¿æŒä¸å˜

---

## ä¹ã€æ•…éšœæ’æŸ¥æŒ‡å—

### 9.1 å¸¸è§é”™è¯¯

**é”™è¯¯ 1ï¼šè¿æ¥å¤±è´¥**
```
âŒ æ— æ³•è¿æ¥åˆ° OpenCode Server
```

**å¯èƒ½åŸå› ï¼š**
- OpenCode Server æœªå¯åŠ¨
- ç«¯å£å·é”™è¯¯
- é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. æ£€æŸ¥ Server æ˜¯å¦è¿è¡Œ
curl http://localhost:4096/global/health

# 2. æ£€æŸ¥ç«¯å£
netstat -an | findstr 4096

# 3. é‡å¯ Server
opencode serve --port 4096
```

**é”™è¯¯ 2ï¼šAI å“åº”ä¸ºç©º**
```
AI è¿”å›äº†ç©ºå“åº”
```

**å¯èƒ½åŸå› ï¼š**
- AI Provider æœªé…ç½®
- API Key æ— æ•ˆ
- ç½‘ç»œé—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. æ£€æŸ¥ Provider é…ç½®
opencode
# æŒ‰ Ctrl+Mï¼ŒæŸ¥çœ‹å½“å‰ Provider

# 2. é‡æ–°é…ç½® API Key
curl -X PUT http://localhost:4096/auth/openai \
  -H "Content-Type: application/json" \
  -d '{"apiKey": "sk-..."}'

# 3. æµ‹è¯• API Key
curl http://localhost:4096/global/health
```

**é”™è¯¯ 3ï¼šé…ç½®ä¿å­˜å¤±è´¥**
```
ä¿å­˜é…ç½®å¤±è´¥: invalid args
```

**å¯èƒ½åŸå› ï¼š**
- é…ç½®æ ¼å¼é”™è¯¯
- å­—æ®µåä¸åŒ¹é…
- æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
2. éªŒè¯ JSON æ ¼å¼
3. æ£€æŸ¥é…ç½®ç›®å½•æƒé™

### 9.2 è°ƒè¯•æŠ€å·§

**æŸ¥çœ‹ Rust æ—¥å¿—ï¼š**
```
è¿è¡Œ npm run tauri dev åï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š
========== ä½¿ç”¨ OpenCode æ›´æ–°éœ€æ±‚æ–‡æ¡£ ==========
é¡¹ç›® ID: xxx
ç”¨æˆ·è¾“å…¥: xxx
OpenCode Server: http://localhost:4096
æ£€æŸ¥ OpenCode Server è¿æ¥...
Server ç‰ˆæœ¬: x.x.x
åˆ›å»º OpenCode ä¼šè¯...
ä¼šè¯ ID: xxx
å‘é€æ¶ˆæ¯åˆ° OpenCode...
æ”¶åˆ°å“åº”ï¼Œé•¿åº¦: xxx å­—ç¬¦
============================================
```

**æŸ¥çœ‹ OpenCode æ—¥å¿—ï¼š**
```bash
# åœ¨ OpenCode Server ç»ˆç«¯æŸ¥çœ‹å®æ—¶æ—¥å¿—
opencode serve --port 4096
```

**æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼š**
```bash
# Windows
type %USERPROFILE%\.config\CodeSensei\opencode-config.json

# macOS/Linux
cat ~/.config/CodeSensei/opencode-config.json
```

---

## åã€ä¸‹ä¸€æ­¥è®¡åˆ’

### 10.1 çŸ­æœŸæ”¹è¿›ï¼ˆ1-2å‘¨ï¼‰

**ä¼˜å…ˆçº§ 1ï¼šæµå¼è¾“å‡º**
- [ ] å®ç° SSE (Server-Sent Events)
- [ ] å®æ—¶æ˜¾ç¤º AI å“åº”
- [ ] æ˜¾ç¤ºå¤„ç†è¿›åº¦

**ä¼˜å…ˆçº§ 2ï¼šå·¥å…·è°ƒç”¨å¯è§†åŒ–**
- [ ] ç›‘å¬ OpenCode çš„äº‹ä»¶æµ
- [ ] æ˜¾ç¤ºæ­£åœ¨è¯»å†™çš„æ–‡ä»¶
- [ ] æ˜¾ç¤ºä½¿ç”¨çš„å·¥å…·

**ä¼˜å…ˆçº§ 3ï¼šé”™è¯¯å¤„ç†æ”¹è¿›**
- [ ] æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- [ ] å‹å¥½çš„é”™è¯¯æç¤º
- [ ] é‡è¯•æœºåˆ¶

### 10.2 ä¸­æœŸè§„åˆ’ï¼ˆ1-2æœˆï¼‰

**åŠŸèƒ½å¢å¼ºï¼š**
- [ ] ä¼šè¯å†å²ç®¡ç†
- [ ] å¤šè½®å¯¹è¯æ”¯æŒ
- [ ] å¯¼å‡º/å¯¼å…¥é…ç½®
- [ ] é¡¹ç›®æ¨¡æ¿

**æ€§èƒ½ä¼˜åŒ–ï¼š**
- [ ] è¿æ¥æ± 
- [ ] å“åº”ç¼“å­˜
- [ ] æ‡’åŠ è½½ä¼˜åŒ–

### 10.3 é•¿æœŸè§„åˆ’ï¼ˆ3-6æœˆï¼‰

**é«˜çº§åŠŸèƒ½ï¼š**
- [ ] Agent ç³»ç»Ÿ
- [ ] è‡ªå®šä¹‰å·¥å…·
- [ ] å¤š Server æ”¯æŒ
- [ ] å›¢é˜Ÿåä½œ

**å¹³å°æ”¯æŒï¼š**
- [ ] macOS æ”¯æŒ
- [ ] Linux æ”¯æŒ
- [ ] è‡ªåŠ¨æ›´æ–°

---

## åä¸€ã€æŠ€æœ¯å†³ç­–è®°å½•

### 11.1 ä¸ºä»€ä¹ˆé€‰æ‹© OpenCode è€Œä¸æ˜¯ Claude Codeï¼Ÿ

| å¯¹æ¯”é¡¹ | Claude Code | OpenCode | é€‰æ‹© |
|--------|-------------|----------|------|
| **å¼€æº** | âŒ å¦ | âœ… æ˜¯ | OpenCode |
| **AI Provider** | ä»… Anthropic | å¤šç§æ”¯æŒ | OpenCode |
| **æˆæœ¬** | æŒ‰ä½¿ç”¨ä»˜è´¹ | çµæ´»ï¼ˆå¯ç”¨æœ¬åœ°æ¨¡å‹ï¼‰ | OpenCode |
| **ç¤¾åŒº** | å®˜æ–¹æ”¯æŒ | å¼€æºç¤¾åŒº | OpenCode |
| **æ‰©å±•æ€§** | å—é™ | å®Œå…¨å¯æ§ | OpenCode |

### 11.2 ä¸ºä»€ä¹ˆä½¿ç”¨ HTTP è€Œä¸æ˜¯ SDKï¼Ÿ

**HTTP çš„ä¼˜åŠ¿ï¼š**
- âœ… è¯­è¨€æ— å…³
- âœ… ç®€å•å¯é 
- âœ… æ˜“äºè°ƒè¯•
- âœ… å‡å°‘ä¾èµ–
- âœ… æ— éœ€ Node.js ä¸­é—´å±‚

### 11.3 ä¸ºä»€ä¹ˆé…ç½®ä½¿ç”¨æ–‡ä»¶è€Œä¸æ˜¯æ•°æ®åº“ï¼Ÿ

**æ–‡ä»¶å­˜å‚¨ä¼˜åŠ¿ï¼š**
- âœ… ç®€å•ç›´æ¥
- âœ… æ˜“äºå¤‡ä»½
- âœ… äººå·¥å¯è¯»
- âœ… æ— éœ€é¢å¤–ä¾èµ–
- âœ… è¶³å¤Ÿå½“å‰éœ€æ±‚

---

## åäºŒã€ç‰ˆæœ¬å†å²

### v0.1.0 (2025-02-05)
- åˆå§‹ç‰ˆæœ¬
- åŸºç¡€é¡¹ç›®ç»“æ„

### v0.2.0 (2025-02-05)
- æ·»åŠ  Monaco Editor
- å®ç°æ–‡ä»¶æ ‘å’ŒåŸºç¡€ç¼–è¾‘åŠŸèƒ½

### v0.3.0 (2026-02-05)
- Tauri æ¡Œé¢åº”ç”¨
- æ ¹ç›®å½•é€‰æ‹©å’Œæ–‡ä»¶æ ‘æ‰«æ
- AI åŠ©æ‰‹ä¾§è¾¹æ ï¼ˆä¸‰ç§æ¨¡å¼ï¼‰
- éœ€æ±‚æ–‡æ¡£ç¼–è¾‘å™¨

### v0.4.0 (2026-02-06)
- **æ¶æ„é‡æ„**ï¼šä» HTTP API æ”¹ä¸º Claude Code SDK
- **æ–°å¢**ï¼šNode.js æ’ä»¶å±‚
- **æ–°å¢**ï¼šTypeScript SDK é›†æˆ
- **å·²çŸ¥é—®é¢˜**ï¼šè¿”å›å€¼è§£æé—®é¢˜

### v1.0.0 (2026-02-08) - â­ **å½“å‰ç‰ˆæœ¬**
- **é‡å¤§æ¶æ„å˜æ›´**ï¼šè¿ç§»åˆ° OpenCode Server
- **ç§»é™¤**ï¼šNode.js æ’ä»¶ç³»ç»Ÿ
- **ç§»é™¤**ï¼šClaude Code SDK ä¾èµ–
- **æ–°å¢**ï¼šOpenCode HTTP å®¢æˆ·ç«¯
- **æ–°å¢**ï¼šé…ç½®ç®¡ç†æ¨¡å—
- **æ–°å¢**ï¼šOpenCode é…ç½®å¯¹è¯æ¡†
- **æ–°å¢**ï¼šServer è¿æ¥æµ‹è¯•
- **ä¼˜åŒ–**ï¼šç®€åŒ–çš„æ„å»ºæµç¨‹
- **ä¼˜åŒ–**ï¼šæ›´æ¸…æ™°çš„æ¶æ„
- **çŠ¶æ€**ï¼šâœ… ç”Ÿäº§å¯ç”¨

---

## é™„å½• Aï¼šOpenCode API å‚è€ƒ

### A.1 æ ¸å¿ƒç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/global/health` | å¥åº·æ£€æŸ¥ |
| POST | `/session` | åˆ›å»ºä¼šè¯ |
| DELETE | `/session/:id` | åˆ é™¤ä¼šè¯ |
| POST | `/session/:id/message` | å‘é€æ¶ˆæ¯ |
| GET | `/session/:id/message` | è·å–æ¶ˆæ¯å†å² |
| GET | `/file?path=...` | åˆ—å‡ºæ–‡ä»¶ |
| GET | `/file/content?path=...` | è¯»å–æ–‡ä»¶ |

### A.2 è®¤è¯æ–¹å¼

**Basic Auth:**
```
Authorization: Basic base64(username:password)
```

**ç¯å¢ƒå˜é‡ï¼š**
```bash
OPENCODE_SERVER_PASSWORD=your-password
OPENCODE_SERVER_USERNAME=your-username
```

### A.3 Provider é…ç½®

**æ”¯æŒçš„ Providerï¼š**
- `openai` - OpenAI (GPT-4, GPT-4o, etc.)
- `anthropic` - Anthropic (Claude 3.5 Sonnet, etc.)
- `openai-compatible` - OpenAI å…¼å®¹æ¥å£
- `azure` - Azure OpenAI
- `google` - Google Gemini

**é…ç½®ç¤ºä¾‹ï¼š**
```bash
curl -X PUT http://localhost:4096/auth/openai \
  -H "Content-Type: application/json" \
  -d '{
    "apiKey": "sk-...",
    "baseURL": "https://api.openai.com/v1"
  }'
```

---

## é™„å½• Bï¼šå¿«é€Ÿå‚è€ƒ

### B.1 å¯åŠ¨å‘½ä»¤

```bash
# å¯åŠ¨ OpenCode Server
opencode serve --port 4096

# å¯åŠ¨ Code Senseiï¼ˆå¼€å‘ï¼‰
npm run tauri dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run tauri build

# è¿è¡Œç”Ÿäº§ç‰ˆæœ¬
.\src-tauri\target\release\code-sensei.exe
```

### B.2 é…ç½®æ–‡ä»¶ä½ç½®

```
Windows: %USERPROFILE%\.config\CodeSensei\opencode-config.json
macOS/Linux: ~/.config/CodeSensei/opencode-config.json
```

### B.3 æ—¥å¿—æŸ¥çœ‹

```bash
# Rust æ—¥å¿—ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm run tauri dev

# OpenCode Server æ—¥å¿—
opencode serve --port 4096

# å‰ç«¯æ—¥å¿—ï¼ˆæµè§ˆå™¨ï¼‰
F12 -> Console
```

### B.4 å¸¸ç”¨ç«¯å£

| æœåŠ¡ | é»˜è®¤ç«¯å£ |
|------|---------|
| OpenCode Server | 4096 |
| Vite Dev Server | 1420 |
| Tauri Dev Server | éšæœº |

---

**æ–‡æ¡£ç»´æŠ¤**: è¯·åœ¨é‡å¤§å˜æ›´ååŠæ—¶æ›´æ–°æœ¬æ–‡æ¡£ï¼Œç‰¹åˆ«æ˜¯ï¼š
- è®°å½•æ¶æ„å˜æ›´
- æ›´æ–°æŠ€æœ¯æ ˆ
- è¡¥å……æ•…éšœæ¡ˆä¾‹
- ä¿æŒç‰ˆæœ¬å†å²çš„å‡†ç¡®æ€§

**æœ€åæ›´æ–°**: 2026-02-08
**ç»´æŠ¤è€…**: Code Sensei Team
